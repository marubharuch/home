import{l as c,r as n,j as e}from"./index-DWxLvh_a.js";const j=async t=>(await c.getItem("orders")||{})[t]||null,b=async t=>{const a=await c.getItem("orders")||{};a[t]&&(delete a[t],await c.setItem("orders",a))};function w({orderKey:t,onSave:a,onModify:d}){const[l,p]=n.useState({}),[i,m]=n.useState({});n.useEffect(()=>{(async()=>{if(t&&t!=="NEW"){const s=await j(t);s&&(p(s.cart||{}),m({phone:s.mobile,serial:s.serial||t.split("/").pop(),createdAt:s.createdAt||s.updatedAt}))}})()},[t]);const f=async()=>{window.confirm("Delete entire order?")&&(await b(t),d())},u=Object.values(l).reduce((r,s)=>r+(parseFloat(s.finalPrice)||0)*(s.quantity||0),0);return e.jsxs("div",{className:"p-4 bg-white shadow rounded",children:[t?.startsWith("TEMP/")&&e.jsx("div",{className:"mb-3 text-sm text-yellow-700",children:e.jsx("p",{children:"âš ï¸ This is a temporary order. Enter mobile to finalize."})}),t!=="NEW"&&!t?.startsWith("TEMP/")&&e.jsxs("div",{className:"mb-3 text-sm text-gray-600",children:[e.jsxs("p",{children:["ðŸ“ž Phone: ",i.phone]}),e.jsxs("p",{children:["ðŸ†” Order No: ",i.serial]}),e.jsxs("p",{children:["ðŸ“… Date: ",i.createdAt]})]}),e.jsx("div",{className:"space-y-2",children:Object.entries(l).map(([r,s])=>e.jsx("div",{className:"flex flex-col border-b py-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:Object.entries(s).map(([o,x])=>{const h=o.toLowerCase();return["code","particulars","description","name"].includes(h)?e.jsx("span",{className:"mr-2 font-semibold",children:h==="code"?`[${x}]`:x},o):null})}),e.jsxs("div",{className:"text-right",children:["Qty: ",s.quantity," Ã— â‚¹",s.finalPrice," ="," ",e.jsxs("span",{className:"font-bold",children:["â‚¹",(s.quantity*parseFloat(s.finalPrice)).toFixed(2)]})]})]})},r))}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("p",{className:"text-lg font-semibold",children:["Total: â‚¹",u.toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a(l),className:"bg-green-600 text-white px-3 py-1 rounded",children:"ðŸ’¾ Save"}),t!=="NEW"&&!t?.startsWith("TEMP/")&&e.jsx("button",{onClick:f,className:"bg-red-600 text-white px-3 py-1 rounded",children:"Delete Order"}),e.jsx("button",{onClick:d,className:"bg-gray-400 text-white px-3 py-1 rounded",children:"Back"})]})]})]})}export{w as default};
