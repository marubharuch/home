import{r as i,l as c,j as t}from"./index-De3XE8Ec.js";function f({orderKey:l,onSave:d,onModify:o}){const[a,n]=i.useState({});i.useEffect(()=>{(async()=>{if(l&&l!=="NEW"){const s=await c.getItem("orders")||{};s[l]&&n(s[l].cart)}else{const s=await c.getItem("cartItems");s&&n(s)}})()},[l]);const x=async s=>{const e={...a};delete e[s],n(e),await c.setItem("cartItems",e)},m=async(s,e)=>{const r={...a,[s]:{...a[s],quantity:parseInt(e,10)||0}};n(r),await c.setItem("cartItems",r)},u=Object.values(a).reduce((s,e)=>s+(parseFloat(e.finalPrice)||0)*(e.quantity||0),0);return Object.keys(a).length?t.jsxs("div",{className:"p-4 space-y-3",children:[t.jsx("h2",{className:"text-lg font-bold mb-2",children:"ğŸ›’ Cart"}),Object.entries(a).map(([s,e])=>t.jsxs("div",{className:"border rounded p-3 shadow-sm bg-white flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex flex-col text-sm flex-1",children:[t.jsx("div",{className:"font-medium",children:e.CODE||"Unnamed"}),t.jsx("div",{className:"text-gray-600",children:e.description||e.particulars}),t.jsxs("div",{className:"text-gray-500",children:["Price: â‚¹",e.finalPrice," Ã—",t.jsx("input",{type:"number",value:e.quantity,min:"0",onChange:r=>m(s,r.target.value),className:"border rounded px-2 py-0.5 ml-1 w-16"})]}),t.jsxs("div",{className:"text-gray-400",children:["Discount: ",e.discount,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("div",{className:"font-semibold text-green-600",children:["â‚¹",(e.finalPrice*e.quantity).toFixed(2)]}),t.jsx("button",{onClick:()=>x(s),className:"text-red-500 border px-2 py-1 rounded hover:bg-red-50",children:"âŒ"})]})]},s)),t.jsxs("div",{className:"flex justify-between mt-4",children:[t.jsx("button",{onClick:()=>d(a),className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"ğŸ’¾ Save Order"}),t.jsx("button",{onClick:o,className:"bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600",children:"âœï¸ Modify Order"})]}),t.jsxs("div",{className:"text-right font-bold text-lg mt-4",children:["Total: â‚¹",u.toFixed(2)]})]}):t.jsx("div",{className:"p-4 text-gray-500",children:"ğŸ›’ Cart is empty"})}export{f as default};
